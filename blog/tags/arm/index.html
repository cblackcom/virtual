<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<title data-react-helmet="true">Posts tagged &quot;arm&quot; | â˜·virtual (alpha)</title><meta data-react-helmet="true" property="og:title" content="Posts tagged &quot;arm&quot; | â˜·virtual (alpha)"><meta data-react-helmet="true" name="description" content="Blog | Tagged &quot;arm&quot;"><meta data-react-helmet="true" property="og:description" content="Blog | Tagged &quot;arm&quot;"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/virtual/img/logo.svg"><link rel="stylesheet" href="/virtual/styles.e9067ecf.css">
<link rel="preload" href="/virtual/styles.e3383376.js" as="script">
<link rel="preload" href="/virtual/runtime~main.3cdd8966.js" as="script">
<link rel="preload" href="/virtual/main.9e207828.js" as="script">
<link rel="preload" href="/virtual/1.52bcfba5.js" as="script">
<link rel="preload" href="/virtual/2.ceccbab3.js" as="script">
<link rel="preload" href="/virtual/6875c492.9a5b59fc.js" as="script">
<link rel="preload" href="/virtual/a5c38e2c.540acb8a.js" as="script">
<link rel="preload" href="/virtual/769d02a8.d9fa488a.js" as="script">
<link rel="preload" href="/virtual/03bb7e42.7ffa0446.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/virtual/"><img src="/virtual/img/logo.svg" alt="beep boop" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/virtual/img/logo.svg" alt="beep boop" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">virtual (alpha)</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/virtual/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kendfinger/virtual" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/virtual/"><img src="/virtual/img/logo.svg" alt="beep boop" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/virtual/img/logo.svg" alt="beep boop" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">virtual (alpha)</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/virtual/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/kendfinger/virtual" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_3I7I thin-scrollbar"><h3 class="sidebarItemTitle_2Dv3">Recent posts</h3><ul class="sidebarItemList_1RlG"><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/virtual/blog/spinning-up-ubuntu-on-mac-with-virtual">Spinning up Ubuntu VMs on the Mac using â˜·virtual v0.0.2</a></li><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/virtual/blog/v0.0.2">v0.0.2 now available</a></li><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/virtual/blog/v0.0.1">v0.0.1 now available on Homebrew</a></li></ul></div></div><main class="col col--8"><h1>1 post tagged with &quot;arm&quot;</h1><a href="/virtual/blog/tags">View All Tags</a><div class="margin-vert--xl"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_1mse"><a href="/virtual/blog/spinning-up-ubuntu-on-mac-with-virtual">Spinning up Ubuntu VMs on the Mac using â˜·virtual v0.0.2</a></h2><div class="margin-vert--md"><time datetime="2020-12-07T00:00:00.000Z" class="blogPostDate_3bQP">December 7, 2020  Â· 7 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/cblackcom" target="_blank" rel="noreferrer noopener"><img src="https://avatars0.githubusercontent.com/u/6203274?s=400&amp;v=4" alt="Colin Black"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/cblackcom" target="_blank" rel="noreferrer noopener">Colin Black</a></h4><small class="avatar__subtitle">Principal Consultant, PNDLM</small></div></div></header><section class="markdown"><p>This article will show you how to use <strong>â˜·virtual</strong>, based on Apple&#x27;s brand-new <a href="https://developer.apple.com/documentation/virtualization" target="_blank" rel="noopener noreferrer">Virtualization.framework</a>, to quickly start and run an Ubuntu 20.04 LTS virtual machine on any Intel or Apple Silicon Mac <em>(excluding the DTK)</em> running Big Sur.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-1-install-â˜·virtual"></a>Step 1: Install â˜·virtual<a class="hash-link" href="#step-1-install-â˜·virtual" title="Direct link to heading">#</a></h3><p>First grab the latest version 0.0.2 or later.  You can either:</p><ul><li>clone <a href="https://github.com/kendfinger/virtual" target="_blank" rel="noopener noreferrer">the repo</a> and compile using Xcode 12.2, or</li><li>install using <a href="https://brew.sh" target="_blank" rel="noopener noreferrer">Homebrew</a>:</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">brew </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> kendfinger/tools/virtual</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># or if you are upgrading from 0.0.1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">brew upgrade kendfinger/tools/virtual</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-2-grab-a-kernel-and-ramdisk"></a>Step 2: Grab a kernel and ramdisk<a class="hash-link" href="#step-2-grab-a-kernel-and-ramdisk" title="Direct link to heading">#</a></h3><p>Aside from the normal CD-image based installers, Ubuntu offers <a href="https://cloud-images.ubuntu.com" target="_blank" rel="noopener noreferrer">cloud images</a> which have been specifically created for use in virtual machines on top of hypervisors like <strong>â˜·virtual</strong>.</p><p>In order to boot, Virtualization.framework requires us to have a <code>vmlinuz</code> kernel executable and an <code>initrd</code> initial ramdisk separated from the image.  Conveniently, Ubuntu offers these for download separately, so just grab each of them below:</p><p>For Intel Macs:</p><ul><li><a href="https://cloud-images.ubuntu.com/focal/current/unpacked/focal-server-cloudimg-amd64-vmlinuz-generic" target="_blank" rel="noopener noreferrer">https://cloud-images.ubuntu.com/focal/current/unpacked/focal-server-cloudimg-amd64-vmlinuz-generic</a></li><li><a href="https://cloud-images.ubuntu.com/focal/current/unpacked/focal-server-cloudimg-amd64-initrd-generic" target="_blank" rel="noopener noreferrer">https://cloud-images.ubuntu.com/focal/current/unpacked/focal-server-cloudimg-amd64-initrd-generic</a></li></ul><p>For Apple Silicon (ARM) Macs:</p><ul><li><a href="https://cloud-images.ubuntu.com/focal/current/unpacked/focal-server-cloudimg-arm64-vmlinuz-generic" target="_blank" rel="noopener noreferrer">https://cloud-images.ubuntu.com/focal/current/unpacked/focal-server-cloudimg-arm64-vmlinuz-generic</a></li><li><a href="https://cloud-images.ubuntu.com/focal/current/unpacked/focal-server-cloudimg-arm64-initrd-generic" target="_blank" rel="noopener noreferrer">https://cloud-images.ubuntu.com/focal/current/unpacked/focal-server-cloudimg-arm64-initrd-generic</a></li></ul><p><strong>Important!</strong>  Sometimes the <code>vmlinuz</code> file is compressed with gzip, and if so it won&#x27;t work as-is.  Check the file you downloaded with the <code>file</code> command, and if it says something about <code>gzip</code> data, then add a <code>.gz</code> to the filename, and use <code>gunzip</code> to decompress it.  Moving on!</p><p><img src="https://storage.googleapis.com/static.cblack.org/blog/virtual-20201203/prompt4.png" alt="prompt4"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-3-get-a-raw-ubuntu-disk-image"></a>Step 3: Get a &quot;raw&quot; Ubuntu disk image<a class="hash-link" href="#step-3-get-a-raw-ubuntu-disk-image" title="Direct link to heading">#</a></h3><p>Ubuntu ships all of its cloud images in the popular &quot;qcow2&quot; format, but with Virtualization.framework you&#x27;ll need it in a &quot;raw&quot; format.</p><p><em>(Option:  Skip this step and download an image I&#x27;ve already converted <a href="https://github.com/cblackcom/virtual-ubuntucloud-images/releases" target="_blank" rel="noopener noreferrer">here</a>.  Make sure to <code>gunzip</code> them before use.  If you find them useful, <a href="https://github.com/cblackcom/virtual-ubuntucloud-images/issues/1" target="_blank" rel="noopener noreferrer">leave me a comment</a> and let me know, and we&#x27;ll do some work to keep them updated.)</em></p><p>No fear, the conversion is a quick operation using the &quot;qemu-img&quot; utility.  You can get this utility on the Mac by using Homebrew (<code>brew install qemu</code>) or if you have a separate Ubuntu box handy (<code>sudo apt install qemu-utils</code>).</p><p>Now, grab the latest Ubuntu cloud image:</p><ul><li>For Intel Macs: <a href="https://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-amd64.img" target="_blank" rel="noopener noreferrer">https://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-amd64.img</a></li><li>For Apple Silicon (ARM) Macs: <a href="https://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-arm64.img" target="_blank" rel="noopener noreferrer">https://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-arm64.img</a></li></ul><p>For clarity, I suggest renaming the downloaded file to something like <code>focal.qcow2</code>, just to make it obvious that it&#x27;s the one in its original qcow2 format.</p><p>Now expand and convert the disk image to raw format.  In the below commands, the <code>10G</code> part means I want to allow the disk image to be 10 GB.  Adjust according to your preferences.  Note that this raw file will consume that entire amount of your computer&#x27;s disk up front, so be sure you have it available to give away!</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">qemu-img resize focal.qcow2 10G</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">qemu-img convert -f qcow2 focal.qcow2 -O raw focal.raw</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>You won&#x27;t need the qcow2 version going forward, but I personally like to keep a copy on hand in case I want to make more machines later. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-4-get-a-cloud-init-disk-image"></a>Step 4: Get a &quot;cloud-init&quot; disk image<a class="hash-link" href="#step-4-get-a-cloud-init-disk-image" title="Direct link to heading">#</a></h3><p>For your first boot, you&#x27;ll also need a very small disk image which instructs &quot;cloud-init&quot; (a piece of software included with the image) on how to set up the users (and other details) on your virtual machine.</p><p>I recommend saving yourself the hassle: to get up and running quickly you can just <a href="https://raw.githubusercontent.com/cblackcom/virtual-ubuntucloud-images/master/cloud-config.raw" target="_blank" rel="noopener noreferrer">download this configuration image I&#x27;ve already created</a> which sets up a default user named <code>virtual</code> with the password <code>password</code>.</p><p>If you want to create your own configuration though, I haven&#x27;t found a super easy or clean way to do this on the Mac, so you&#x27;ll need access to an Ubuntu machine.  First, install &quot;cloud-image-utils&quot; and &quot;whois&quot; (<code>sudo apt install cloud-image-utils whois</code>) in order to get access to the <code>cloud-localds</code> and <code>mkpasswd</code> utilities.</p><p>Pick a password, then use <code>mkpasswd</code> to generate an SHA-512 hash for it:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkpasswd --method</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">SHA-512 --rounds</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># (you will be prompted to type your selected password)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Create a file called <code>cloud-config.yaml</code> and customize the below to your liking, pasting your password hash as the value for the <code>passwd:</code> key.  The example below will setup a new user of <code>virtual</code> with the password of <code>password</code>, and it will have full sudo rights.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#cloud-config</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">users</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> virtual</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># this password is &#x27;password&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">passwd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $6$rounds=4096$p/wwO8kiDXwYBJ1F$g1gwvobPyJVAaW/0N6AeamYHm4P0jVaZ3HDkCeStElOu0gcpbzPZ28W7QThp/p9zkMk8ZARxtvDBEucvD0smG/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">lock_passwd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">sudo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ALL=(ALL) NOPASSWD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">ALL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">shell</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /bin/bash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">chpassword</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token key atrule">expire</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">ssh_pwauth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>There&#x27;s tons of other options you can use to configure your new machine; check out the <a href="https://cloudinit.readthedocs.io/en/latest/topics/examples.html" target="_blank" rel="noopener noreferrer">cloud-init documentation site</a> to learn all about it.</p><p>Finally, run the command to create your configuration image:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cloud-localds -v cloud-config.raw cloud-config.yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-5--first-boot"></a>Step 5:  First Boot!<a class="hash-link" href="#step-5--first-boot" title="Direct link to heading">#</a></h3><p>With that you have everything you need.  You can put together your command line arguments to boot <code>virtual</code> noting the following:</p><ul><li>Use <code>-c</code> to specify some kernel command line arguments:<ul><li><code>console=hvc0</code> will cause boot messages to output to your current terminal (useful for debugging!)</li><li><code>root=/dev/vda</code> tells Linux to boot into your disk image</li></ul></li><li>Carefully (!) specify the correct filenames for <code>-k</code> (kernel), <code>-r</code> (initrd), the first <code>-d</code> which must be your Ubuntu disk image, and the second <code>-d</code> which must be your cloud-init image.  The ordering of the <code>-d</code> arguments <strong>must</strong> be the Ubuntu disk image first, or the machine may not boot.</li><li>Finally specify <code>-n</code> to enable networking.</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">virtual run -c </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;console=hvc0 root=/dev/vda1&quot;</span><span class="token plain"> -k focal-XXX-vmlinuz -r focal-XXX-initrd -d focal.raw -d cloud-config.raw -n</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>With any luck your machine should boot, and you should see a prompt like this.  (You might need to hit enter a time or two after everything boots to see the prompt!)
<img src="https://storage.googleapis.com/static.cblack.org/blog/virtual-20201203/prompt1.png" alt="image1"></p><p>You should now be able to login using the credentials you chose in Step 4.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-6-note-your-ip-and-mac-addresses"></a>Step 6: Note your IP and MAC Addresses<a class="hash-link" href="#step-6-note-your-ip-and-mac-addresses" title="Direct link to heading">#</a></h3><p>On first boot, each virtual machine you start will get its own random and unique MAC address assigned to it.  You&#x27;ll need to note the address so that whenever you reboot the machine you ask virtual to assign the same MAC address so that your networking works consistently.</p><p>Before you shut the virtual machine down, you need to grab the IP and MAC addresses that have been assigned to your machine for future use.  <em>Be careful not to use ctrl-c as that will terminate your machine.</em></p><p>From your virtual machine&#x27;s prompt, run the following commands:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> -4 addr show dev enp0s1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">link</span><span class="token plain"> show dev enp0s1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The output of the commands will display your virtual machine&#x27;s IP address (circled first, between <code>inet</code> and <code>/</code>) and its MAC address (circled second).</p><p><img src="https://storage.googleapis.com/static.cblack.org/blog/virtual-20201203/prompt3.png" alt="image1"></p><p>Copy this information down, then shutdown your machine:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">shutdown</span><span class="token plain"> now</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-7-alter-your-boot-arguments"></a>Step 7: Alter your boot arguments<a class="hash-link" href="#step-7-alter-your-boot-arguments" title="Direct link to heading">#</a></h3><p>So now, going forward, you can reboot your virtual machine at any time using this command, noting the following:</p><ul><li>The command arguments are the same as Step 5, except we&#x27;re <strong>removing</strong> the second <code>-d</code> specification, and we&#x27;re adding <code>-a</code>, where you should carefully paste in the MAC address you grabbed in Step 6.</li><li>Carefully (!) specify the correct filenames for <code>-k</code> (kernel), <code>-r</code> (initrd), and <code>-d</code> (your Ubuntu disk image).</li><li>Finally specify <code>-n</code> to enable networking.</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">virtual run -a </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;96:ef:e3:3e:7a:47&quot;</span><span class="token plain"> -c </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;console=hvc0 root=/dev/vda1&quot;</span><span class="token plain"> -k focal-XXX-vmlinuz -r focal-XXX-initrd -d focal.raw -n  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-8-ssh-in"></a>Step 8: SSH in<a class="hash-link" href="#step-8-ssh-in" title="Direct link to heading">#</a></h3><p>Finally, in order to get a better overall terminal experience (and to avoid accidentally hitting ctrl-c and terminating your machine), I recommend minimizing the terminal you&#x27;ve used to boot your machine, and instead opening a new one to SSH in to your virtual machine to perform commands.  In the example below, of course, specify the username you chose and the IP address you grabbed in Step 5.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">ssh</span><span class="token plain"> virtual@192.168.64.21</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="congratulations"></a>Congratulations!<a class="hash-link" href="#congratulations" title="Direct link to heading">#</a></h2><p>You now have a working Ubuntu virtual machine built on <strong>â˜·virtual</strong>.  It goes without saying you can create and run several machines simultaneously and network them together for all sorts of possibilities.  Now, get on to experimenting!</p><p>I know Kenneth is excited to announce several goals for the project in the near future.  Stay tuned to this blog for more!</p><p>Oh and also, if you want to submit feedback for this tutorial, please comment on this GitHub issue:
<a href="https://github.com/cblackcom/virtual/issues/1" target="_blank" rel="noopener noreferrer">https://github.com/cblackcom/virtual/issues/1</a></p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/virtual/blog/tags/ubuntu">ubuntu</a><a class="margin-horiz--sm" href="/virtual/blog/tags/apple-silicon">apple silicon</a><a class="margin-horiz--sm" href="/virtual/blog/tags/arm">arm</a><a class="margin-horiz--sm" href="/virtual/blog/tags/m-1">m1</a><a class="margin-horiz--sm" href="/virtual/blog/tags/intel">intel</a></div><div class="col text--right"><a aria-label="Read more about Spinning up Ubuntu VMs on the Mac using â˜·virtual v0.0.2" href="/virtual/blog/spinning-up-ubuntu-on-mac-with-virtual"><strong>Read More</strong></a></div></footer></article></div></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Brought to you by @kendfinger, @cblackcom and others.  Built with Docusaurus.</div></div></div></footer></div>
<script src="/virtual/styles.e3383376.js"></script>
<script src="/virtual/runtime~main.3cdd8966.js"></script>
<script src="/virtual/main.9e207828.js"></script>
<script src="/virtual/1.52bcfba5.js"></script>
<script src="/virtual/2.ceccbab3.js"></script>
<script src="/virtual/6875c492.9a5b59fc.js"></script>
<script src="/virtual/a5c38e2c.540acb8a.js"></script>
<script src="/virtual/769d02a8.d9fa488a.js"></script>
<script src="/virtual/03bb7e42.7ffa0446.js"></script>
</body>
</html>